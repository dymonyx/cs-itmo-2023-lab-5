> [!NOTE]
Предварительно был установлен git.

## Введение

Был создан репозиторий git-practice.

> ![](/Report/Pasted_image_20231215005116.png)

Была создана папка lab_5, куда был скопирован репозиторий git_practice.

> ![](/Report/Pasted_image_20231215005600.png)

В папке репозитория был создан файл example.txt, в который был добавлен фрагмент книги с главами и параграфами.

> ![](/Report/Pasted_image_20231215011500.png)

> ![](/Report/Pasted_image_20231215011724.png)

При попытке запушить комит, гит просит нас ввести логин и пароль

> ![](/Report/Pasted_image_20231215012500.png)

В графе пароль нужно указать personal access token, поэтому он был создан в гитхаб. https://qna.habr.com/q/1216714

> ![](/Report/Pasted_image_20231215012641.png)

Теперь все успешно запушилось!

> ![](/Report/Pasted_image_20231215012918.png)

Была создана ветка feature-branch. Был совершён переход в эту ветку. Был изменён файл example.txt - добавлен Chapter 3: plus more jokes!

> ![](/Report/Pasted_image_20231215013335.png)

Добавлен коммит

> ![](/Report/Pasted_image_20231215013904.png)
> ![](/Report/Pasted_image_20231215013921.png)

Слияние ветки произошло успешно.

> ![](/Report/Pasted_image_20231215014205.png)

Проверка: 

> ![](/Report/Pasted_image_20231215014641.png)
> ![](/Report/Pasted_image_20231215014649.png)

> [!CAUTION] 
> #### Авторизовываться при каждом пуше - неудобно. Нужно это исправить.

## Решение проблемы с авторизацией № 1
https://git-scm.com/docs/git-credential-cache

> ![](/Report/Pasted_image_20231215015717.png)
> [!CAUTION] 
> #### Проблема с авторизацией никуда не делась - пробуем решить другим способом.


## Решение проблем с авторизацией №2
Установлен ## [GitHub CLI](https://docs.github.com/en/get-started/getting-started-with-git/caching-your-github-credentials-in-git#github-cli)
С помощью 
`sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-key C99B11DEB97541F0`
`sudo apt-add-repository -u https://cli.github.com/packages`
`sudo apt-get update`
`sudo apt-get install gh`

> ![](/Report/Pasted_image_20231215025201.png)

Теперь авторизовываться не нужно. Бинго!

> ![](/Report/Pasted_image_20231215025955.png)
## Работа с ветками
Создан новый файл jokes.txt.

> ![](/Report/Pasted_image_20231215031633.png)

Файл успешно запушен в главную ветку.

> ![](/Report/Pasted_image_20231215031857.png)

Была создана новая ветка feature-login, где в файл были внесены изменения - добавлена Chapter 3.

> ![](/Report/Pasted_image_20231215032043.png)

Ветка отправлена на гитхаб. 

> ![](/Report/Pasted_image_20231215032317.png)


## Работа с удалённым репозиторием


Совершён переход в основную ветку. Изменён файл jokes.txt - добавлено название книги `JOKES AND RIDDLES!`

> ![](/Report/Pasted_image_20231215032701.png)

> [!IMPORTANT]
> Так как мы в главной ветке - тут нет Chapter 3.

Изменения в файле закоммичены и отправлены на гитхаб.

> ![](/Report/Pasted_image_20231215033222.png)

## Моделирование конфликта

Для моделирования конфликта был совершён переход в ветку `feature-login`, где в файле `jokes.txt` было изменено название книги на `RIDDLES AND JOKES!

> В основной ветке названием книги было `JOKES AND RIDDLES!`

> ![](/Report/Pasted_image_20231215034147.png)

Изменения были закоммичены и отправлены в гитхаб.

> ![](/Report/Pasted_image_20231215034353.png)

## Разрешение конфликта

Совершен переход в главную ветку. Главная ветка обновлена с помощью `pull`. Попытка слить две ветки - `git merge feature-login` - не увенчалась успехом. Возник конфликт.

> ![](/Report/Pasted_image_20231215040241.png)

Необходимо почистить файл и выбрать одно из названий.

> ![](/Report/Pasted_image_20231215041837.png)
> 
> ![](/Report/Pasted_image_20231215041922.png)

Добавляем изменённый файл, коммитим разрешение конфликта и отправляем его на гитхаб. Бинго!

> ![](/Report/Pasted_image_20231215042255.png)

## Автоматизация проверки формата файлов при коммите
Узнаём полный путь к hooks и создаём скрипт `check_format.bash`, который будет проверять .txt файлы на соответствие.
(полезная ссылка https://xakep.ru/2016/02/11/git-hook-magic/#toc02, https://semakin.dev/2020/05/pre-commit/)

> ![](Pasted_image_20231215053326.png)
> ![](Pasted_image_20231217025708.png)

Копирование скрипта в папку с hooks, предоставление полномочий.

> ![](Pasted_image_20231217022455.png)

В репозиторий был скопирован файл `your_book_file.txt` (c помощью команды `cp your_book_file.txt /home/agonek/lab_5/git-practice`), в формате которого содержатся ошибки - строка после Chapter 2 должна быть пустой.

> ![](Pasted_image_20231217023053.png)

Добавляем файл в индекс, пробуем закоммитить измнения - получаем ошибку, так как файл не соответствует формату.

> ![](Pasted_image_20231217030210.png)

Меняем файл (делаем пустой 18 строку). 

> ![](Pasted_image_20231217030351.png)

Добавляем файл в индекс и делаем коммит. Бинго! Теперь всё работает.

> ![](Pasted_image_20231217030432.png)
## Использование Git Flow в проекте
https://bitworks.software/2019-03-12-gitflow-workflow.html
Удостоверимся, что мы находимся в корне репозиторию и запустим инициализацию git flow.

> ![](Pasted_image_20231217044355.png)

В репозиторий был добавлен файл `task_manager.py` с некоторыми функциями. Создана ветка для добавления новой фичи.

> ![](Pasted_image_20231217044515.png)

В ветке feature/task_manager был изменён файл с новой функцией `create_task` и дополненным блоком `action`.

> ![](Pasted_image_20231217044739.png)

Файл добавлен в индекс, закоммичен. Фича завершена и обьединена с веткой `develop`.

> ![](Pasted_image_20231217044917.png)

Вносим изменения, связанные с релизом (файл с номером релиза).

> ![](Pasted_image_20231217045408.png)

Завершение релиза. Слияние веток с помощью
`git checkout main`
`git pull origin main`
`git push origin main`

> ![](Pasted_image_20231217045752.png)

Cмоделируем ситуацию, когда в процессе эксплуатации проекта была выявлена критическая ошибка (цикл должен проходиться с нуля, а не с 1): 

> ![](Pasted_image_20231217050313.png)

Создаем hotfix, исправляем ошибку.

> ![](Pasted_image_20231217051024.png)

Добавляем изменения, коммитим:

> ![](Pasted_image_20231217051308.png)

Завершаем хотфикс и сливаем всё в главную ветку.

> ![](Pasted_image_20231217051836.png)

Пушим изменения в удалённый репозиторий.

> ![](Pasted_image_20231217052047.png)

